{"version":3,"sources":["app/domain/negotiation/Negotiations.ts","app/ui/views/View.ts","app/ui/converters/DateConverter.ts","app/ui/views/NegotiationsView.ts","app/domain/negotiation/Negotiation.ts","app/ui/models/Message.ts","app/ui/views/MessageView.ts","app/controllers/NegotiationController.ts","app/app.ts"],"names":[],"mappings":"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","file":"app.b67aa344.map","sourceRoot":"../src","sourcesContent":["export class Negotiations {\n  private _negotiations: any;\n\n  constructor() {\n    this._negotiations = [];\n  }\n\n  add(negotiation: any) {\n    this._negotiations.push(negotiation);\n  }\n\n  toArray() {\n    return [].concat(this._negotiations);\n  }\n\n  get totalVolume() {\n    return this._negotiations.reduce((total: any, negotiation: any) => total + negotiation.volume, 0);\n  }\n}","export class View {\n  private _element: any;\n\n  constructor(selector: string) {\n    this._element = document.querySelector(selector);\n  }\n\n  public update(model: any) {\n    this._element.innerHTML = this.render(model);\n  }\n\n  public render(model: any) {\n    throw new Error('You need to implement the render method!')\n  }\n}","export class DateConverter {\n  static toText(date: any): string {\n    return `${date.getDate()}/${date.getMonth() + 1}/${date.getFullYear()}`\n  }\n\n  static toDate(text: string): Date {\n    const regex = /^\\d{4}-\\d{2}-\\d{2}$/;\n    if (!regex.test(text)) {\n      throw new Error('Must be in the format yyyy-mm-dd')\n    }\n    return new Date(...text.split('-').map((item, index) => item - index % 2));\n  }\n}","import { View } from './View';\nimport { DateConverter } from '../converters/DateConverter';\n\nexport class NegotiationsView extends View {\n  render(model: any): string {\n    console.log(model);\n    return `\n      <table class=\"table\">\n          <thead>\n              <tr>\n                  <th>Date</th>\n                  <th>Quantity</th>\n                  <th>Value</th>\n                  <th>Volume</th>\n              </tr>\n          </thead>\n\n          <tbody>\n              ${model.toArray().map((negotiation: any) =>\n                `\n                  <tr>\n                      <td>${DateConverter.toText(negotiation.date)}</td>\n                      <td>${negotiation.quantity}</td>\n                      <td>${negotiation.value}</td>\n                      <td>${negotiation.volume}</td>\n                  </tr>                        \n              `).join('')}\n          </tbody>\n          \n          <tfoot>\n              <tr>\n                  <td colspan=\"3\"></td>\n                  <td>${model.totalVolume}</td>            \n              </tr>\n          </tfoot>\n          \n      </table>      \n    `\n  }\n}\n","export class Negotiation {\n  private _date: any;\n  private _quantity: any;\n  private _value: any;\n\n  constructor(_date: any, _quantity: any, _value: any) {\n    Object.assign(this, {_quantity, _value});\n    this._date = new Date(_date.getTime());\n    Object.freeze(this);\n  }\n\n  get volume() {\n    return this._quantity * this._value;\n  }\n\n  get date() {\n    return new Date(this._date.getTime());\n  }\n\n  get quantity() {\n    return this._quantity;\n  }\n\n  get value() {\n    return this._value;\n  }\n}","export class Message {\n  private _text: string;\n\n  constructor(text = '') {\n    this._text = text;\n  }\n\n  get text() {\n    return this._text;\n  }\n\n  set text(text) {\n    this._text = text;\n  }\n}","import { View } from './View';\n\nexport class MessageView extends View {\n  render(model: any): string {\n    return model.text ? `<p>${model.text}</p>` : '';\n  }\n}","import { Negotiations } from './../domain/negotiation/Negotiations';\nimport { NegotiationsView } from '../ui/views/NegotiationsView';\nimport { Negotiation } from './../domain/negotiation/Negotiation';\nimport { DateConverter } from './../ui/converters/DateConverter';\nimport { Message } from './../ui/models/Message';\nimport { MessageView } from '../ui/views/MessageView';\n\nexport class NegotiationController {\n  private _inputDate: any;\n  private _inputQuantity: any;\n  private _inputValue: any;\n  private _negotiations: any;\n  private _negotiationsView: any;\n  private _message: any;\n  private _messageView: any;\n\n  constructor() {\n    const $ = document.querySelector.bind(document);\n    this._inputDate = $('#date');\n    this._inputQuantity = $('#quantity');\n    this._inputValue = $('#value');\n\n    this._negotiations = new Negotiations();\n    this._negotiationsView = new NegotiationsView('#negotiations');\n\n    this._message = new Message();\n    this._messageView = new MessageView('#messageView');\n    this._messageView.update(this._message);\n  }\n\n  public add(event: any): void {\n    event.preventDefault();\n    this._negotiations.add(this._createNegotiation());\n    this._message.text = 'Successfully created negotiation'\n    this._negotiationsView.update(this._negotiations);\n    this._clearForm();\n    this._messageView.update(this._message);\n  }\n\n  private _clearForm(): void {\n    this._inputDate.value = '';\n    this._inputQuantity.value = '';\n    this._inputValue.value = '';\n    this._inputDate.focus();\n  }\n\n  private _createNegotiation() {\n    return new Negotiation(\n      DateConverter.toDate(this._inputDate.value),\n      parseInt(this._inputQuantity.value),\n      parseFloat(this._inputValue.value)\n    );\n  }\n}","import { NegotiationController } from './controllers/NegotiationController';\n\nconst controller = new NegotiationController;\nconst $form = document.querySelector('[data-js=\"form\"]')\n\nif ($form) {\n  $form.addEventListener('submit', controller.add.bind(controller))\n}"]}