{"version":3,"sources":["app\\ui\\converters\\DateConverter.ts","app\\ui\\models\\Message.ts","app\\ui\\views\\View.ts","app\\ui\\views\\MessageView.ts","app\\ui\\views\\NegotiationsView.ts","app\\domain\\negotiation\\Negotiation.ts","app\\domain\\negotiation\\Negotiations.ts","app\\controllers\\NegotiationController.ts","app\\app.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,IAAA,gBAAA,aAAA,YAAA;AAAA,aAAA,aAAA,GAAA,CAYC;AAXe,kBAAA,MAAA,GAAd,UAAqB,IAArB,EAA8B;AAC5B,eAAU,KAAK,OAAL,KAAc,GAAd,IAAkB,KAAK,QAAL,KAAkB,CAApC,IAAqC,GAArC,GAAyC,KAAK,WAAL,EAAnD;AACD,KAFa;AAIA,kBAAA,MAAA,GAAd,UAAqB,IAArB,EAAiC;AAC/B,YAAM,QAAQ,qBAAd;AACA,YAAI,CAAC,MAAM,IAAN,CAAW,IAAX,CAAL,EAAuB;AACrB,kBAAM,IAAI,KAAJ,CAAU,kCAAV,CAAN;AACD;AACD,eAAA,KAAW,KAAI,IAAJ,CAAI,KAAJ,CAAA,IAAA,EAAI,CAAA,KAAA,CAAA,EAAA,MAAA,CAAI,KAAK,KAAL,CAAW,GAAX,EAAgB,GAAhB,CAAoB,UAAC,IAAD,EAAO,KAAP,EAAY;AAAK,mBAAA,OAAO,QAAQ,CAAf;AAAgB,SAArD,CAAJ,CAAJ,CAAX,GAAA;AACD,KANa;AAOhB,WAAA,aAAA;AAZA,CAAA,EAAA;AAAa,QAAA,aAAA,GAAA,aAAA;;;;;ACAb,IAAA,UAAA,aAAA,YAAA;AAGE,aAAA,OAAA,CAAY,IAAZ,EAAqB;AAAT,YAAA,SAAA,KAAA,CAAA,EAAA;AAAA,mBAAA,EAAA;AAAS;AACnB,aAAK,KAAL,GAAa,IAAb;AACD;AAED,WAAA,cAAA,CAAI,QAAA,SAAJ,EAAI,MAAJ,EAAQ;aAAR,eAAA;AACE,mBAAO,KAAK,KAAZ;AACD,SAFO;aAIR,aAAS,IAAT,EAAa;AACX,iBAAK,KAAL,GAAa,IAAb;AACD,SANO;wBAAA;;AAAA,KAAR;AAOF,WAAA,OAAA;AAdA,CAAA,EAAA;AAAa,QAAA,OAAA,GAAA,OAAA;;;;;ACAb,IAAA,OAAA,aAAA,YAAA;AAGE,aAAA,IAAA,CAAY,QAAZ,EAA4B;AAC1B,aAAK,QAAL,GAAgB,SAAS,aAAT,CAAuB,QAAvB,CAAhB;AACD;AAEM,SAAA,SAAA,CAAA,MAAA,GAAP,UAAc,KAAd,EAAwB;AACtB,aAAK,QAAL,CAAc,SAAd,GAA0B,KAAK,MAAL,CAAY,KAAZ,CAA1B;AACD,KAFM;AAIA,SAAA,SAAA,CAAA,MAAA,GAAP,UAAc,KAAd,EAAwB;AACtB,cAAM,IAAI,KAAJ,CAAU,0CAAV,CAAN;AACD,KAFM;AAGT,WAAA,IAAA;AAdA,CAAA,EAAA;AAAa,QAAA,IAAA,GAAA,IAAA;;;;;;;;;;;;;;;;;;;;;ACAb,IAAA,SAAA,QAAA,QAAA,CAAA;AAEA,IAAA,cAAA,aAAA,UAAA,MAAA,EAAA;AAAiC,cAAA,WAAA,EAAA,MAAA;AAAjC,aAAA,WAAA,GAAA;;AAIC;AAHQ,gBAAA,SAAA,CAAA,MAAA,GAAP,UAAc,KAAd,EAAwB;AACtB,eAAO,MAAM,IAAN,GAAa,0CAAsC,MAAM,IAA5C,GAAgD,MAA7D,GAAsE,EAA7E;AACD,KAFM;AAGT,WAAA,WAAA;AAJA,CAAA,CAAiC,OAAA,IAAjC,CAAA;AAAa,QAAA,WAAA,GAAA,WAAA;;;;;;;;;;;;;;;;;;;;;ACFb,IAAA,kBAAA,QAAA,6BAAA,CAAA;AAEA,IAAA,SAAA,QAAA,QAAA,CAAA;AAEA,IAAA,mBAAA,aAAA,UAAA,MAAA,EAAA;AAAsC,cAAA,gBAAA,EAAA,MAAA;AAAtC,aAAA,gBAAA,GAAA;;AAiCC;AAhCQ,qBAAA,SAAA,CAAA,MAAA,GAAP,UAAc,KAAd,EAAwB;AACtB,eAAO,qVAYK,MAAM,OAAN,GAAgB,GAAhB,CAAoB,UAAC,WAAD,EAAiB;AACrC,mBAAA,yDAEY,gBAAA,aAAA,CAAc,MAAd,CAAqB,YAAY,IAAjC,CAFZ,GAEkD,mCAFlD,GAGY,YAAY,QAHxB,GAGgC,mCAHhC,GAIY,YAAY,KAJxB,GAI6B,mCAJ7B,GAKY,YAAY,MALxB,GAK8B,gCAL9B;AAMQ,SAPR,EAOU,IAPV,CAOe,EAPf,CAZL,GAmBuB,kIAnBvB,GAyBa,MAAM,WAzBnB,GAyB8B,sEAzBrC;AA8BD,KA/BM;AAgCT,WAAA,gBAAA;AAjCA,CAAA,CAAsC,OAAA,IAAtC,CAAA;AAAa,QAAA,gBAAA,GAAA,gBAAA;;;;;ACJb,IAAA,cAAA,aAAA,YAAA;AAKE,aAAA,WAAA,CAAY,KAAZ,EAAwB,SAAxB,EAAwC,MAAxC,EAAmD;AACjD,eAAO,MAAP,CAAc,IAAd,EAAoB,EAAC,WAAS,SAAV,EAAY,QAAM,MAAlB,EAApB;AACA,aAAK,KAAL,GAAa,IAAI,IAAJ,CAAS,MAAM,OAAN,EAAT,CAAb;AACA,eAAO,MAAP,CAAc,IAAd;AACD;AAED,WAAA,cAAA,CAAI,YAAA,SAAJ,EAAI,QAAJ,EAAU;aAAV,eAAA;AACE,mBAAO,KAAK,SAAL,GAAiB,KAAK,MAA7B;AACD,SAFS;wBAAA;;AAAA,KAAV;AAIA,WAAA,cAAA,CAAI,YAAA,SAAJ,EAAI,MAAJ,EAAQ;aAAR,eAAA;AACE,mBAAO,IAAI,IAAJ,CAAS,KAAK,KAAL,CAAW,OAAX,EAAT,CAAP;AACD,SAFO;wBAAA;;AAAA,KAAR;AAIA,WAAA,cAAA,CAAI,YAAA,SAAJ,EAAI,UAAJ,EAAY;aAAZ,eAAA;AACE,mBAAO,KAAK,SAAZ;AACD,SAFW;wBAAA;;AAAA,KAAZ;AAIA,WAAA,cAAA,CAAI,YAAA,SAAJ,EAAI,OAAJ,EAAS;aAAT,eAAA;AACE,mBAAO,KAAK,MAAZ;AACD,SAFQ;wBAAA;;AAAA,KAAT;AAGF,WAAA,WAAA;AA1BA,CAAA,EAAA;AAAa,QAAA,WAAA,GAAA,WAAA;;;;;ACAb,IAAA,eAAA,aAAA,YAAA;AAGE,aAAA,YAAA,GAAA;AACE,aAAK,aAAL,GAAqB,EAArB;AACD;AAEM,iBAAA,SAAA,CAAA,GAAA,GAAP,UAAW,WAAX,EAA2B;AACzB,aAAK,aAAL,CAAmB,IAAnB,CAAwB,WAAxB;AACD,KAFM;AAIA,iBAAA,SAAA,CAAA,OAAA,GAAP,YAAA;AACE,eAAO,GAAG,MAAH,CAAU,KAAK,aAAf,CAAP;AACD,KAFM;AAIP,WAAA,cAAA,CAAI,aAAA,SAAJ,EAAI,aAAJ,EAAe;aAAf,eAAA;AACE,mBAAO,KAAK,aAAL,CAAmB,MAAnB,CAA0B,UAAC,KAAD,EAAa,WAAb,EAA6B;AAAK,uBAAA,QAAQ,YAAY,MAApB;AAA0B,aAAtF,EAAwF,CAAxF,CAAP;AACD,SAFc;wBAAA;;AAAA,KAAf;AAGF,WAAA,YAAA;AAlBA,CAAA,EAAA;AAAa,QAAA,YAAA,GAAA,YAAA;;;;;ACAb,IAAA,kBAAA,QAAA,kCAAA,CAAA;AAEA,IAAA,YAAA,QAAA,wBAAA,CAAA;AAEA,IAAA,gBAAA,QAAA,yBAAA,CAAA;AACA,IAAA,qBAAA,QAAA,8BAAA,CAAA;AAEA,IAAA,gBAAA,QAAA,qCAAA,CAAA;AACA,IAAA,iBAAA,QAAA,sCAAA,CAAA;AAEA,IAAA,wBAAA,aAAA,YAAA;AASE,aAAA,qBAAA,GAAA;AACE,YAAM,IAAI,SAAS,aAAT,CAAuB,IAAvB,CAA4B,QAA5B,CAAV;AACA,aAAK,UAAL,GAAkB,EAAE,OAAF,CAAlB;AACA,aAAK,cAAL,GAAsB,EAAE,WAAF,CAAtB;AACA,aAAK,WAAL,GAAmB,EAAE,QAAF,CAAnB;AAEA,aAAK,aAAL,GAAqB,IAAI,eAAA,YAAJ,EAArB;AACA,aAAK,iBAAL,GAAyB,IAAI,mBAAA,gBAAJ,CAAqB,eAArB,CAAzB;AAEA,aAAK,QAAL,GAAgB,IAAI,UAAA,OAAJ,EAAhB;AACA,aAAK,YAAL,GAAoB,IAAI,cAAA,WAAJ,CAAgB,cAAhB,CAApB;AACA,aAAK,YAAL,CAAkB,MAAlB,CAAyB,KAAK,QAA9B;AACD;AAEM,0BAAA,SAAA,CAAA,GAAA,GAAP,UAAW,KAAX,EAAqB;AACnB,cAAM,cAAN;AACA,aAAK,aAAL,CAAmB,GAAnB,CAAuB,KAAK,kBAAL,EAAvB;AACA,aAAK,QAAL,CAAc,IAAd,GAAqB,kCAArB;AACA,aAAK,iBAAL,CAAuB,MAAvB,CAA8B,KAAK,aAAnC;AACA,aAAK,UAAL;AACA,aAAK,YAAL,CAAkB,MAAlB,CAAyB,KAAK,QAA9B;AACD,KAPM;AASC,0BAAA,SAAA,CAAA,UAAA,GAAR,YAAA;AACE,aAAK,UAAL,CAAgB,KAAhB,GAAwB,EAAxB;AACA,aAAK,cAAL,CAAoB,KAApB,GAA4B,EAA5B;AACA,aAAK,WAAL,CAAiB,KAAjB,GAAyB,EAAzB;AACA,aAAK,UAAL,CAAgB,KAAhB;AACD,KALO;AAOA,0BAAA,SAAA,CAAA,kBAAA,GAAR,YAAA;AACE,eAAO,IAAI,cAAA,WAAJ,CACL,gBAAA,aAAA,CAAc,MAAd,CAAqB,KAAK,UAAL,CAAgB,KAArC,CADK,EAEL,SAAS,KAAK,cAAL,CAAoB,KAA7B,EAAoC,EAApC,CAFK,EAGL,WAAW,KAAK,WAAL,CAAiB,KAA5B,CAHK,CAAP;AAKD,KANO;AAOV,WAAA,qBAAA;AA9CA,CAAA,EAAA;AAAa,QAAA,qBAAA,GAAA,qBAAA;;;;;ACVb,IAAA,0BAAA,QAAA,qCAAA,CAAA;AAEA,IAAM,aAAa,IAAI,wBAAA,qBAAJ,EAAnB;AACA,IAAM,QAAQ,SAAS,aAAT,CAAuB,kBAAvB,CAAd;AAEA,IAAI,KAAJ,EAAW;AACT,UAAM,gBAAN,CAAuB,QAAvB,EAAiC,WAAW,GAAX,CAAe,IAAf,CAAoB,UAApB,CAAjC;AACD","file":"app.54354990.map","sourceRoot":"..\\src","sourcesContent":["export class DateConverter {\r\n  public static toText(date: any): string {\r\n    return `${date.getDate()}/${date.getMonth() + 1}/${date.getFullYear()}`;\r\n  }\r\n\r\n  public static toDate(text: string): Date {\r\n    const regex = /^\\d{4}-\\d{2}-\\d{2}$/;\r\n    if (!regex.test(text)) {\r\n      throw new Error('Must be in the format yyyy-mm-dd');\r\n    }\r\n    return new Date(...text.split('-').map((item, index) => item - index % 2));\r\n  }\r\n}\r\n","export class Message {\r\n  private _text: string;\r\n\r\n  constructor(text = '') {\r\n    this._text = text;\r\n  }\r\n\r\n  get text() {\r\n    return this._text;\r\n  }\r\n\r\n  set text(text) {\r\n    this._text = text;\r\n  }\r\n}\r\n","export class View {\r\n  private _element: any;\r\n\r\n  constructor(selector: string) {\r\n    this._element = document.querySelector(selector);\r\n  }\r\n\r\n  public update(model: any) {\r\n    this._element.innerHTML = this.render(model);\r\n  }\r\n\r\n  public render(model: any) {\r\n    throw new Error('You need to implement the render method!');\r\n  }\r\n}\r\n","import { View } from './View';\r\n\r\nexport class MessageView extends View {\r\n  public render(model: any): string {\r\n    return model.text ? `<p class=\"notification is-success\">${model.text}</p>` : '';\r\n  }\r\n}\r\n","import { DateConverter } from '../converters/DateConverter';\r\n\r\nimport { View } from './View';\r\n\r\nexport class NegotiationsView extends View {\r\n  public render(model: any): string {\r\n    return `\r\n      <table class=\"table is-bordered is-striped is-hoverable is-fullwidth\">\r\n          <thead>\r\n              <tr>\r\n                  <th>Date</th>\r\n                  <th>Quantity</th>\r\n                  <th>Value</th>\r\n                  <th>Volume</th>\r\n              </tr>\r\n          </thead>\r\n\r\n          <tbody>\r\n              ${model.toArray().map((negotiation: any) =>\r\n                `\r\n                  <tr>\r\n                      <td>${DateConverter.toText(negotiation.date)}</td>\r\n                      <td>${negotiation.quantity}</td>\r\n                      <td>${negotiation.value}</td>\r\n                      <td>${negotiation.volume}</td>\r\n                  </tr>`).join('')}\r\n          </tbody>\r\n\r\n          <tfoot>\r\n              <tr>\r\n                  <td colspan=\"3\"></td>\r\n                  <td>${model.totalVolume}</td>\r\n              </tr>\r\n          </tfoot>\r\n      </table>\r\n    `;\r\n  }\r\n}\r\n","export class Negotiation {\r\n  private _date: any;\r\n  private _quantity: any;\r\n  private _value: any;\r\n\r\n  constructor(_date: any, _quantity: any, _value: any) {\r\n    Object.assign(this, {_quantity, _value});\r\n    this._date = new Date(_date.getTime());\r\n    Object.freeze(this);\r\n  }\r\n\r\n  get volume() {\r\n    return this._quantity * this._value;\r\n  }\r\n\r\n  get date() {\r\n    return new Date(this._date.getTime());\r\n  }\r\n\r\n  get quantity() {\r\n    return this._quantity;\r\n  }\r\n\r\n  get value() {\r\n    return this._value;\r\n  }\r\n}\r\n","export class Negotiations {\r\n  private _negotiations: any;\r\n\r\n  constructor() {\r\n    this._negotiations = [];\r\n  }\r\n\r\n  public add(negotiation: any) {\r\n    this._negotiations.push(negotiation);\r\n  }\r\n\r\n  public toArray() {\r\n    return [].concat(this._negotiations);\r\n  }\r\n\r\n  get totalVolume() {\r\n    return this._negotiations.reduce((total: any, negotiation: any) => total + negotiation.volume, 0);\r\n  }\r\n}\r\n","import { DateConverter } from './../ui/converters/DateConverter';\r\n\r\nimport { Message } from './../ui/models/Message';\r\n\r\nimport { MessageView } from '../ui/views/MessageView';\r\nimport { NegotiationsView } from '../ui/views/NegotiationsView';\r\n\r\nimport { Negotiation } from './../domain/negotiation/Negotiation';\r\nimport { Negotiations } from './../domain/negotiation/Negotiations';\r\n\r\nexport class NegotiationController {\r\n  private _inputDate: any;\r\n  private _inputQuantity: any;\r\n  private _inputValue: any;\r\n  private _negotiations: any;\r\n  private _negotiationsView: any;\r\n  private _message: any;\r\n  private _messageView: any;\r\n\r\n  constructor() {\r\n    const $ = document.querySelector.bind(document);\r\n    this._inputDate = $('#date');\r\n    this._inputQuantity = $('#quantity');\r\n    this._inputValue = $('#value');\r\n\r\n    this._negotiations = new Negotiations();\r\n    this._negotiationsView = new NegotiationsView('#negotiations');\r\n\r\n    this._message = new Message();\r\n    this._messageView = new MessageView('#messageView');\r\n    this._messageView.update(this._message);\r\n  }\r\n\r\n  public add(event: any): void {\r\n    event.preventDefault();\r\n    this._negotiations.add(this._createNegotiation());\r\n    this._message.text = 'Successfully created negotiation';\r\n    this._negotiationsView.update(this._negotiations);\r\n    this._clearForm();\r\n    this._messageView.update(this._message);\r\n  }\r\n\r\n  private _clearForm(): void {\r\n    this._inputDate.value = '';\r\n    this._inputQuantity.value = '';\r\n    this._inputValue.value = '';\r\n    this._inputDate.focus();\r\n  }\r\n\r\n  private _createNegotiation() {\r\n    return new Negotiation(\r\n      DateConverter.toDate(this._inputDate.value),\r\n      parseInt(this._inputQuantity.value, 10),\r\n      parseFloat(this._inputValue.value),\r\n    );\r\n  }\r\n}\r\n","import { NegotiationController } from './controllers/NegotiationController';\r\n\r\nconst controller = new NegotiationController();\r\nconst $form = document.querySelector('[data-js=\"form\"]');\r\n\r\nif ($form) {\r\n  $form.addEventListener('submit', controller.add.bind(controller));\r\n}\r\n"]}