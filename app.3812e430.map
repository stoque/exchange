{"version":3,"sources":["app/ui/converters/DateConverter.ts","app/ui/models/Message.ts","app/ui/views/View.ts","app/ui/views/MessageView.ts","app/ui/views/NegotiationsView.ts","app/domain/negotiation/Negotiation.ts","app/domain/negotiation/Negotiations.ts","app/controllers/NegotiationController.ts","app/app.ts"],"names":[],"mappings":";;;;AAAA,IAAA,gBAAA,aAAA,YAAA;AAAA,aAAA,aAAA,GAAA,CAYC;AAXe,ACDhB,IAAA,UAAA,IDCgB,MAAA,GAAd,ACDF,UDCuB,ECDvB,EDCE,EAA8B;AAC5B,ACCF,aAAA,EDDY,KAAK,ACCjB,CAAY,IAAZ,EDDY,ACCS,KDDK,GAAd,IAAkB,KAAK,QAAL,KAAkB,CAApC,IAAqC,GAArC,GAAyC,KAAK,WAAL,EAAnD;AACD,ACAW,ACHd,IAAA,CFCgB,MEDhB,CDGc,SAAA,GCHd,EDGc,CAAA,EAAA,OCHd;AFKgB,ACFF,ACAZ,aAAA,IAAA,CFEc,AEFF,CDAA,EAAA,GDEE,EEFd,CFEA,CEF4B,SFEP,IAArB,EAAiC;AAC/B,ACHmB,ACCnB,YFEM,CEFD,OFES,CEFd,GAAgB,SAAS,QFEzB,KEFgB,CAAuB,QAAvB,CAAhB;AFGA,ACHA,ACCD,YFEK,CAAC,ACHA,KAAL,CDGW,ECHE,EDGR,CAAW,CCHhB,GDGK,CAAL,EAAuB;AACrB,ACHH,ACEM,SAAA,SFCG,AEDH,CAAA,GFCO,GEDP,EFCG,CAAU,AEDpB,UAAc,KAAd,EAAwB,iBFCd,CAAN;AACD,ACFH,ACCE,WDDF,ECCO,QAAL,CAAc,GDDhB,CAAI,KCCF,GDDE,ACCwB,KAAK,IDDjC,EAAI,ACCwB,CAAY,KDDxC,ACC4B,CAA1B,CDDM;AIPV,ALUI,AEDD,IGTH,CHOS,QDAP,EDGE,GKVJ,ELUe,KAAI,GCHjB,CDGa,CAAI,CKVnB,ILUe,CAAA,IAAA,EAAI,CKVnB,ALUmB,KAAA,CAAA,EAAA,MAAA,CAAI,KAAK,KAAL,CAAW,GAAX,EAAgB,GAAhB,CAAoB,UAAC,IAAD,EAAO,KAAP,EAAY;AKLrD,ALK0D,ACFxD,ACGK,SAAA,IGNP,KHMO,CFDmD,ACFjD,ACGF,KGNP,AJGc,CIHF,AHML,CFD0D,EECjE,CDHE,CIHF,EAAwB,ELKiD,CAAf,GEC5C,GGNd,EAAwC,AHMxC,EAAwB,IGNxB,EAAmD;AACjD,ACNJ,ANU4E,ACDzE,ACGC,IIZJ,KNUuB,ACHb,CDGS,CAAJ,CAAX,EEEM,CGNC,ALIP,GEEU,CIZd,EDMI,CAAc,CHMR,CAAU,EGNhB,EAAoB,EAAC,ECNzB,SDMkC,GCNlC,MDMwB,EAAY,QAAM,MAAlB,AHMd,CAAN,CGNA;AACA,ACJF,ANQC,AEEA,KFRa,AEMP,QGJA,ACJP,ALQA,KIJE,GAAa,IAAI,ACJnB,CLQS,EKRT,CDIe,CAAS,AJIxB,EAAa,IIJiB,OAAN,EAAT,CAAb;AEPJ,AFQI,ACJA,ANQJ,ACAI,ACEJ,IKdA,OPYA,AEEA,EIVS,EDIE,AHMX,EDFS,IIJL,CERJ,AFQkB,AJId,EDAJ,CCAiB,CIJb,ACJA,GAAqB,ALQrB,CMZJ,CDII,iCCJJ,CAAA;AAEA,AFOG,ACJA,ANLH,ACaG,ACbH,CFAA,AEAA,EFAA,AEAA,CKEA,KNKU,OMLV,QAAA,wBAAA,CAAA;ACFA,ADIA,AFOE,ACJO,ANPI,AEAA,IMAb,ADIA,IPJa,AEAA,GGWX,CHXW,GAAA,EIOJ,EJPI,CKIb,CPJa,GAAA,ACOH,CIIR,CAAI,ACJG,CAAA,CCHT,ECJA,AFOS,GAAP,INPW,CQAb,AHWM,KCJO,IDIX,EAAI,IEPN,CAAA,ADGE,EAA2B,CDI3B,EAAU,gBGXZ,CAAA;AAEA,ADGA,ADGI,IENE,ADGN,SFME,ACHO,IENU,IAAI,IDGvB,CDGI,CAAmB,CDGrB,GCHE,CAAwB,CCH5B,UDGI,EENmB,kBDGvB,CAAA,ECHmB,EAAnB;AACA,ADIA,AFKI,ACHD,ALFO,IOJJ,ADIN,CDAS,ALAP,OOJY,OHSH,CELX,CCJuB,GHSP,IELhB,KFKW,CGTG,CAAuB,CHST,KAAK,MAA7B,MGTU,CAAd,WDIA,CAAA;ACFA,ADGA,AFKG,ACFM,ALGT,IOTI,ADGJ,KCHA,AHMY,EGND,APSX,MKHS,CLGT,GMNA,KDGS,CAAA,ECHT,KDGS,GAAP,YAAA,kBCHF,CAAA;ACFE,ADIF,ADEI,ALZJ,CAAA,EAAA,CMUA,MCJQ,KFMG,GAAG,MDDF,ACCD,CAAU,CENnB,CAAuB,CDIzB,EDE0B,KENxB,EAAiC,IDInC,EDEW,CAAP,IEN0C,GAAX,CAAe,CDIlD,GCJmC,CAAoB,UAApB,CAAjC;AACD,ADYC,ADNC,ALbU,KKWJ,GLXI,KMmBX,ENnBW,GAAA,OAAA,SMmBX,GAAA;AACE,AFTQ,ACIV,AHfF,IAAA,CEWE,MCIA,CCKQ,CJpBV,GIoBc,KJpBd,IIoBuB,ADLrB,CAAI,GHfN,CAAA,QIoBc,CAAuB,ADL/B,ICKQ,CAA4B,IDLxC,EAAI,ECKQ,CAAV,UDLF,EAAe;ACMb,AFNF,AFbF,IAAA,OEaE,EEMO,ADNP,KHbF,KImBI,EFNF,CEMoB,AFNhB,EEMkB,ADNtB,GHbF,IImBsB,CAAlB,EFNE,GFbN,MEaE,AFbF,EEaM,AFbN,MEaE,EAAQ;AEON,ADNA,AHd6B,ACFjC,IAAA,SGsBS,AFPP,CFb+B,KGctB,GFhBX,EEgBgB,CHdiB,EIoB7B,AJpB6B,CEa/B,EEOwB,AHtB1B,EGsB4B,CJpBK,IGctB,CAAmB,KCMJ,CAAtB,ADNO,CAA0B,UAAC,IFhBtC,CEgBqC,AFhBrC,EEgBkD,WAAb,EAA6B;ACO9D,AFPA,ACAmE,AHdvE,ACAA,IAAA,SGqBS,AJrBT,ACAA,MCcW,EDdX,ECce,ACAwD,CCOnE,AJrBJ,GIqBuB,AFPZ,AFdX,CEcoB,CEOK,AHrBzB,CAAA,CEc+E,EDAtD,IEOF,CAAnB,AFPgB,CAAW,ICA4D,GDAvE,EAAT,CAAP,ACAmE;ACSnE,AFRD,ACD8F,AFZjG,IAAA,KCWU,IEUD,ADTE,EAAwF,CAAxF,CAAP,MFZJ,GGqBI,GAAqB,IAAI,GHrB7B,UAAA,EGqB6B,IHrB7B,EAAA,MGqByB,EAArB;AACA,ADTD,AHXF,ACFqC,SEWrB,ICWR,CHtB6B,UCW5B,MEWN,AHtBkC,EAAA,CGsBT,IAAI,CHtBK,kBGsBL,gBAAJ,CAAqB,eAArB,CAAzB;AAEA,AJzBK,ACCT,aGwBS,AHxBT,GDDS,KIyBL,GAAgB,ADbH,CHZR,CAAA,EIyBe,CHxBxB,GDDS,ACCT,GDDE,GIyBsB,OAAJ,AJzBJ,EIyBZ,GJzBF,EAAwB;AI0BtB,AFdM,AFXN,KEWF,QEcO,EJzBE,MAAM,IIyBb,AJzBO,GIyBa,AJzBA,IIyBI,cAAA,WAAJ,CAAgB,GJzBa,MAAM,IAAnC,CIyBA,CAApB,CJzB2D,MAApD,GAA6D,EAApE;AI0BA,AFXF,ACJe,AHVd,ACgCF,KEtBC,AHZO,MEgBP,EEWO,YAAL,AFXF,CEWoB,AFXhB,MEWF,CAAyB,KAAK,AFX5B,QEWF,CFXF,EAAI,UAAJ,EAAY;AEYX,ADbH,AHZA,ACDS,WEaT,AHZA,EEaE,QDdO,CDCT,CGYA,KDCE,EDdO,CAAA,MAAA,GAAP,UAAc,KAAd,EAAwB;AG4BjB,AFbL,ACpBJ,AHEA,ACII,CENJ,AHEA,CAAiC,CGFjC,MHEiC,IAAjC,CAAA,CCIW,ICcA,KAAK,EEaP,OFbL,EEaK,CAAA,GAAA,GAAP,UAAW,KAAX,EAAqB,wPHfP,MAAM,OAAN,GAAgB,GAAhB,CAAoB,UAAC,WAAD,EAAiB;AGgBjD,AFbD,ACrBU,AHEA,ACiBG,QEnBH,AHEA,CEiBC,KEeJ,KJhCG,ACiBG,CEnBH,EHEA,CGFA,KCkCT,KJhCS,EGFA,yCFqBe,gBAAA,aAAA,CAAc,MAAd,CAAqB,YAAY,IAAjC,CAFZ,GAEkD,mCAFlD,GAGY,YAAY,QAHxB,GAGgC,mCAHhC,GAIY,YAAY,KAJxB,GAI6B,mCAJ7B,GAKY,YAAY,MALxB,GAK8B,gCAL9B;AGgBZ,AHVoB,SAPR,EAOU,EGUjB,EHjBO,CAOe,EAPf,CAZL,GAmBuB,ECNpB,EEgBV,CAAmB,GAAnB,CAAuB,KAAK,kBAAL,EAAvB,gGH7BO,GAyBa,MAAM,WAzBnB,GAyB8B,sEAzBrC;AG8BA,AHAD,KA/BM,QG+BA,QAAL,CAAc,IAAd,GAAqB,kCAArB;AACA,AFlBU,ADkBd,KClBE,MDkBF,EGAS,cHAT,GGAI,CAAuB,MAAvB,CAA8B,KAAK,aAAnC;AACA,AFfF,ADnBF,CAAA,CAAsC,OAAA,ECmBpC,EEeO,AHlCT,CAAA,SGkCI,EFfF,CAAI,YAAA,SAAJ,EAAI,OAAJ,EAAS;AEgBP,AHnCS,QAAA,KGmCJ,AFhBP,WDnBW,CGmCT,CAAkB,CHnCT,CCmBX,IEgBE,CAAyB,KAAK,KHnCrB,GGmCT;AACD,AFhBC,KESK,cFTE,KAAK,MAAZ;AEkBM,AFjBP,SAFQ,iBEmBD,SAAA,CAAA,UAAA,GAAR,YAAA;AACE,aAAK,UAAL,CAAgB,AFpBT,KEoBP,GAAwB,EAAxB;AACA,aAAK,cAAL,CAAoB,KAApB,GAA4B,EAA5B;AACA,AFtBO,KAAT,QEsBO,WAAL,CAAiB,KAAjB,GAAyB,EAAzB;AACA,AFpBJ,WAAA,EEoBS,SFpBT,CEoBI,CAAgB,KAAhB;AACD,AF/CH,CAAA,EAAA,EE0CU;AAOA,AFjDG,QAAA,WAAA,GAAA,IEiDH,OFjDG,EEiDH,CAAA,kBAAA,GAAR,YAAA;AACE,eAAO,IAAI,cAAA,WAAJ,CACL,gBAAA,aAAA,CAAc,MAAd,CAAqB,KAAK,UAAL,CAAgB,KAArC,CADK,EAEL,SAAS,KAAK,cAAL,CAAoB,KAA7B,EAAoC,EAApC,CAFK,EAGL,WAAW,KAAK,WAAL,CAAiB,KAA5B,CAHK,CAAP;AAKD,KANO;AAOV,WAAA,qBAAA;AA9CA,CAAA,EAAA;AAAa,QAAA,qBAAA,GAAA,qBAAA","file":"app.3812e430.map","sourceRoot":"../src","sourcesContent":["export class DateConverter {\n  public static toText(date: any): string {\n    return `${date.getDate()}/${date.getMonth() + 1}/${date.getFullYear()}`;\n  }\n\n  public static toDate(text: string): Date {\n    const regex = /^\\d{4}-\\d{2}-\\d{2}$/;\n    if (!regex.test(text)) {\n      throw new Error('Must be in the format yyyy-mm-dd');\n    }\n    return new Date(...text.split('-').map((item, index) => item - index % 2));\n  }\n}\n","export class Message {\n  private _text: string;\n\n  constructor(text = '') {\n    this._text = text;\n  }\n\n  get text() {\n    return this._text;\n  }\n\n  set text(text) {\n    this._text = text;\n  }\n}\n","export class View {\n  private _element: any;\n\n  constructor(selector: string) {\n    this._element = document.querySelector(selector);\n  }\n\n  public update(model: any) {\n    this._element.innerHTML = this.render(model);\n  }\n\n  public render(model: any) {\n    throw new Error('You need to implement the render method!');\n  }\n}\n","import { View } from './View';\n\nexport class MessageView extends View {\n  public render(model: any): string {\n    return model.text ? `<p class=\"alert -success\">${model.text}</p>` : '';\n  }\n}\n","import { DateConverter } from '../converters/DateConverter';\n\nimport { View } from './View';\n\nexport class NegotiationsView extends View {\n  public render(model: any): string {\n    return `\n      <table class=\"table\">\n          <thead>\n              <tr>\n                  <th>Date</th>\n                  <th>Quantity</th>\n                  <th>Value</th>\n                  <th>Volume</th>\n              </tr>\n          </thead>\n\n          <tbody>\n              ${model.toArray().map((negotiation: any) =>\n                `\n                  <tr>\n                      <td>${DateConverter.toText(negotiation.date)}</td>\n                      <td>${negotiation.quantity}</td>\n                      <td>${negotiation.value}</td>\n                      <td>${negotiation.volume}</td>\n                  </tr>`).join('')}\n          </tbody>\n\n          <tfoot>\n              <tr>\n                  <td colspan=\"3\"></td>\n                  <td>${model.totalVolume}</td>\n              </tr>\n          </tfoot>\n      </table>\n    `;\n  }\n}\n","export class Negotiation {\n  private _date: any;\n  private _quantity: any;\n  private _value: any;\n\n  constructor(_date: any, _quantity: any, _value: any) {\n    Object.assign(this, {_quantity, _value});\n    this._date = new Date(_date.getTime());\n    Object.freeze(this);\n  }\n\n  get volume() {\n    return this._quantity * this._value;\n  }\n\n  get date() {\n    return new Date(this._date.getTime());\n  }\n\n  get quantity() {\n    return this._quantity;\n  }\n\n  get value() {\n    return this._value;\n  }\n}\n","export class Negotiations {\n  private _negotiations: any;\n\n  constructor() {\n    this._negotiations = [];\n  }\n\n  public add(negotiation: any) {\n    this._negotiations.push(negotiation);\n  }\n\n  public toArray() {\n    return [].concat(this._negotiations);\n  }\n\n  get totalVolume() {\n    return this._negotiations.reduce((total: any, negotiation: any) => total + negotiation.volume, 0);\n  }\n}\n","import { DateConverter } from './../ui/converters/DateConverter';\n\nimport { Message } from './../ui/models/Message';\n\nimport { MessageView } from '../ui/views/MessageView';\nimport { NegotiationsView } from '../ui/views/NegotiationsView';\n\nimport { Negotiation } from './../domain/negotiation/Negotiation';\nimport { Negotiations } from './../domain/negotiation/Negotiations';\n\nexport class NegotiationController {\n  private _inputDate: any;\n  private _inputQuantity: any;\n  private _inputValue: any;\n  private _negotiations: any;\n  private _negotiationsView: any;\n  private _message: any;\n  private _messageView: any;\n\n  constructor() {\n    const $ = document.querySelector.bind(document);\n    this._inputDate = $('#date');\n    this._inputQuantity = $('#quantity');\n    this._inputValue = $('#value');\n\n    this._negotiations = new Negotiations();\n    this._negotiationsView = new NegotiationsView('#negotiations');\n\n    this._message = new Message();\n    this._messageView = new MessageView('#messageView');\n    this._messageView.update(this._message);\n  }\n\n  public add(event: any): void {\n    event.preventDefault();\n    this._negotiations.add(this._createNegotiation());\n    this._message.text = 'Successfully created negotiation';\n    this._negotiationsView.update(this._negotiations);\n    this._clearForm();\n    this._messageView.update(this._message);\n  }\n\n  private _clearForm(): void {\n    this._inputDate.value = '';\n    this._inputQuantity.value = '';\n    this._inputValue.value = '';\n    this._inputDate.focus();\n  }\n\n  private _createNegotiation() {\n    return new Negotiation(\n      DateConverter.toDate(this._inputDate.value),\n      parseInt(this._inputQuantity.value, 10),\n      parseFloat(this._inputValue.value),\n    );\n  }\n}\n","import { NegotiationController } from './controllers/NegotiationController';\n\nconst controller = new NegotiationController();\nconst $form = document.querySelector('[data-js=\"form\"]');\n\nif ($form) {\n  $form.addEventListener('submit', controller.add.bind(controller));\n}\n"]}