{"version":3,"sources":["app/domain/negotiation/Negotiations.ts","app/ui/views/View.ts","app/ui/converters/DateConverter.ts","app/ui/views/NegotiationsView.ts","app/domain/negotiation/Negotiation.ts","app/ui/models/Message.ts","app/ui/views/MessageView.ts","app/controllers/NegotiationController.ts","app/app.ts"],"names":[],"mappings":";;;;AAAA,IAAA,eAAA,aAAA,YAAA;AAGE,aAAA,YAAA,GAAA;AACE,ACJJ,IAAA,OAAA,EDIS,WCJT,EDII,GAAqB,EAArB,KCJJ;ADKG,ACFD,aAAA,IAAA,CAAY,QAAZ,EAA4B;ADI5B,AEPF,ADII,ICJJ,SDIS,IDGP,GEPF,CDII,GAAgB,EDGlB,CAAA,GAAA,GAAA,AEPF,ADI6B,UDGvB,EEPN,CDIoB,CAAuB,ODGzC,CCHkB,CDGE,ACHlB;ADIA,AERJ,ADKG,aDGM,AERT,aFQI,AERJ,CFQuB,EERvB,CAYC,CFJG,CAAwB,WAAxB;AACD,AERM,ADMA,KDAP,ICAO,SCNA,ADMA,CAAA,KCNA,CDMA,ECNP,CDMA,SCNc,CDMA,GCNd,EAAuB,ADMvB,EAAwB;ADIxB,AETE,ADMA,aAAK,ECNK,EFSZ,GETiB,CDMf,CAAc,IDGhB,CAAA,AETY,IDMV,CCNwB,EFS1B,ACH4B,CCNhB,EFSZ,EET8B,ADMG,KCNE,CDMP,CAAY,GDGxC,ECH4B,CCNE,ADM5B,KCN8C,CAApC,IAAqC,GAArC,GAAyC,KAAK,WAAL,EAAnD;AEFJ,AJYI,AETD,ADMA,IGTH,CFCS,ADMA,UDKE,GIZX,AJYc,MAAH,CAAU,KAAK,CIZ1B,YAAA,AJYW,CAAP;AIPF,AJQC,AERM,ADMA,KDAP,ICAO,IGNP,KFAO,ADMA,CAAA,KGNP,AFAO,CEAK,AHML,ECNP,CDMA,EGNA,EAAwB,KFAV,CDMA,GGNd,AFAA,EEAwC,AFAd,ADM1B,EAAwB,IGNxB,EAAmD;AACjD,AJSF,AETE,AGNJ,AJYI,IIZJ,OLeE,CETQ,EGNV,AJYU,CGNC,GHMG,ECNI,CEAd,CAAc,CHMR,CAAU,CDGlB,CITE,AJSE,CKfN,CDMwB,EAAC,SJSnB,AKfN,EDMkC,AFA9B,OFSF,EITsB,AJSlB,EIT8B,QAAM,GJSxC,EAAe,CITO,AHMd,CAAN,CGNA;AACA,AFAA,AGJF,AJUC,KAFM,OCJD,CEAC,AJQP,AERO,AGJP,KDIE,CFAW,CGJb,CDIe,ACJH,EHIL,CAAW,CEAC,ACJnB,EAAqB,CLYrB,AERO,CEAQ,AFAb,CEAsB,CFAC,KEAK,OAAN,EAAT,CAAb;AACA,AJQA,AERE,AGLQ,AJWd,WAAA,CIXc,GDKH,AHMX,GCNY,CFQD,EIRP,ACLU,CDKI,AFAF,EFQA,EIRZ,ACLU,CHKF,AGLE,CHKQ,CGLR,QLaH,CAAmB,MAAnB,CAA0B,UAAC,KAAD,EAAa,AERtC,CAAN,UFQ+B,EAA6B;AIP/D,AJOoE,AEPlE,AGNS,AJHd,CAAA,EAAA,gBIGc,EAAA,ELayD,QAAQ,YAAY,MAApB;AOhBvE,AHWE,AJK+F,AEN7F,AGPmB,AJHV,IMAb,INAa,GGWX,CHXW,CDgBF,EAAwF,AEN/F,ADVS,CDgBF,CAAP,EChBS,CCUE,CKVf,IHWE,AFDiB,CECb,GGXN,ALUe,CAAI,KAAJ,CAAA,EECT,EFDS,EAAI,CAAA,IECjB,CFDiB,CECb,AFDa,EAAA,MECjB,AFDiB,CAAI,CECX,IFDgB,IKV5B,CAAA,ALUuB,CAAW,GAAX,EAAgB,GAAhB,CAAoB,UAAC,IAAD,EAAO,KAAP,EAAY;AKTvD,APgBG,AEPyD,AGNxD,IEHJ,KPciB,IIJf,ACPO,KAAL,CHMwD,EGN3C,IEHjB,AFGI,CHM+D,EECjE,KGVF,CLS2E,CAAf,4BKT5D,CAAA;ACDA,ADEA,AHUI,AFFwE,AGLzE,IGLH,ADEA,KLQuB,CAAJ,CAAJ,CAAX,GAAA,IEEO,CGVX,IHUgB,AJGC,IObjB,ECFA,GJYW,GAAiB,EIZ5B,GJYiC,MAA7B,kBGVJ,CAAA,SCFA,CAAA;AAEA,ADCA,AHUG,AFFA,AGJD,IGLI,ADCN,CLES,IEMG,ECJV,MGLiB,IAAI,CDCvB,GFIE,CAAI,IEJN,IFIM,SAAJ,EGLqB,AHKjB,MAAJ,EAAQ,WEJV,CAAA,CCDmB,EAAnB;AACA,ADCA,APWiB,AEHjB,IMTM,ADCN,CPWE,MEHF,CMTc,CHIZ,GEHF,KCDuB,GDCvB,AHOY,AFCZ,IGLE,MGJY,CAAuB,aDCrC,CAAA,ICDc,CAAd;AAEA,ADAA,APaA,AElBA,AGQI,CHRJ,EAAA,CMKI,ADAJ,KCAA,EAAW,ARaX,QKVW,CEHX,GPaA,CKVgB,IEHhB,CFGI,wBEHJ,CAAA;ACCE,ADCF,AHIY,AJXZ,AEAa,AGSV,CLTH,EAAA,COOA,CHIE,GFXW,CGOH,CGDF,WNNK,GAAA,EMMX,CAAuB,CDCzB,OCDE,EAAiC,ANNtB,IKOb,OCD8C,GAAX,CAAe,CDClD,GCDmC,CAAoB,UAApB,CAAjC;AACD,ADSC,AHDA,AJfW,QAAA,GIeX,EGCA,AFLA,OLXW,GAAA,EIeX,CAAI,ACJK,IAAT,EAAa,EEKb,CPhBW,EOgBX,CHDI,SAAJ,EAAI,MAAJ,EAAQ;AGEN,AFLA,AFZJ,IAAA,QIiBU,CHFR,ADfF,GIiBc,CFLL,IFZT,CEYI,GEKmB,AFLN,GDGf,CCHE,AFZJ,CAAA,QIiBc,CAAuB,IAAvB,CAA4B,QAA5B,CAAV;AACA,AHFA,ACHD,AFZH,IAAA,KEMU,IEWD,MHFE,GDfX,CIiBI,AHFW,GGEO,CHFX,CGEa,AHFJ,EDfpB,GCeyB,EGEH,CAAlB,EHFgB,CAAW,OAAX,EAAT,CAAP,UDfJ,CAAA;AIkBI,AHFD,ADdH,IAAA,KCYU,IGID,UJhBT,CEIU,GEYN,GAAsB,EAAE,IJhB5B,OIgB0B,CAAtB,EJhBJ,MAAA,EAAA;AIiBI,AJjBkC,aIiB7B,CJjB6B,UIiBlC,AHLM,GGKa,EAAE,CJjBa,EAAA,KIiBf,CAAnB,AJjBkC;AImBlC,AFfM,AFJV,KEIE,QEeO,AJnBT,aImBI,GAAqB,AJnBzB,GAAA,CImB6B,eAAA,YAAJ,EAArB;AACA,AHRM,ACDV,KDCE,MCDF,EESS,KFTT,YESI,GAAyB,IAAI,mBAAA,gBAAJ,CAAqB,eAArB,CAAzB;AAEA,AHNF,ACnBF,ACAA,AHuCC,CEvCD,EAAA,CCAA,OFmBE,EGMO,ADzBT,QCyBI,ADzBJ,GCyBoB,CHNlB,CAAI,EGMkB,CDzBxB,CAAA,QCyBwB,AHNlB,OGMc,EAAhB,AHNF,EAAI,UAAJ,EAAY;AGOV,AF1BS,ACEb,AHEE,IGFF,IDFa,KE0BJ,AHPP,ECnBW,GAAA,ACEb,GHEE,IIsBE,AF1BS,GE0BW,AHPtB,EDfA,CGFF,AHEE,CIsB0B,KJtB1B,GAAA,CGFF,KCwB4B,CDxB5B,EAAA,CHES,KAAP,EIsBsB,AJtBL,CIsBqB,cAAhB,CAApB;AACA,AHPA,AElB6B,AHG7B,aIsBK,CDzBwB,EHGrB,GCeD,ADfP,CAAY,ICeA,CGOZ,ADzB6B,AHG7B,CIsBkB,CDzBW,KCyB7B,CAAyB,AHPzB,AElB6B,KCyBC,QAA9B;AACD,AHPA,AEnBH,AHII,SCaU,IEjBd,EHIW,SGJX,GAAA,wRHgBgB,MAAM,OAAN,GAAgB,GAAhB,CAAoB,UAAC,WAAD,EAAiB;AIY5C,AJXO,mBAAA,KCAF,EGWL,SAAA,CAAA,GAAA,GAAP,UAAW,KAAX,EAAqB,iBJTK,gBAAA,aAAA,CAAc,MAAd,CAAqB,YAAY,IAAjC,CAFZ,GAEkD,mCAFlD,GAGY,YAAY,QAHxB,GAGgC,mCAHhC,GAIY,YAAY,KAJxB,GAI6B,mCAJ7B,GAKY,YAAY,MALxB,GAK8B,wEAL9B;AIYZ,ADzBH,AHoBc,SARC,EAQC,GIKP,CJbM,CAQM,EARN,CAZL,GAoBc,MIKrB,sIJzBO,GA0Ba,MAAM,WA1BnB,GA0B8B,oGA1BrC;AI0BA,AHbU,AEhBZ,AHmCC,KCnBD,ADfA,QI4BO,GD7BP,SAAA,CC6BE,AD7BF,CC6BqB,GAAnB,CAAuB,CD7BzB,GAAA,CC6B8B,SD7BvB,KAAP,EAAiB,EC6BQ,EAAvB;AACA,AHVF,AEnBE,AHmCJ,WChBE,ADgBF,EINS,ED7BE,MC6BP,AD7Ba,CC6BC,GHVhB,AEnBS,CC6BP,AHVE,CDgBN,CGnCwB,CC6BC,OD7BK,EFmBxB,IEnB8B,IAAZ,CFmBtB,EAAI,AEnBkC,MAA7B,CFmBT,EAAS,AEnBsC,EAA7C,GC6BA;AACA,AD7BD,AHFH,CAAA,CAAsC,GGApC,IHAoC,II+B7B,AHXP,ADpBF,CAAA,cCoBE,EGWE,CAAuB,MAAvB,CAA8B,KAAK,aAAnC;AACA,AHXA,AElBJ,AHHa,QAAA,GGGb,EC6BS,MHXE,GElBX,CC6BI,CHXY,ADrBH,GAAA,GCqBT,aDrBS;AIiCT,AHXD,AEvBH,CAAA,CAAiC,OFqBtB,AErBsB,ICkCxB,ADlCT,CAAA,WCkCI,CAAkB,MAAlB,CAAyB,KAAK,QAA9B;AACD,ADnCU,KC4BJ,GD5BI,WAAA,GAAA,EFqBF,SErBE;ACqCH,0BAAA,SAAA,CAAA,UAAA,GAAR,YAAA;AACE,AHjBO,KAAT,QGiBO,UAAL,CAAgB,KAAhB,GAAwB,EAAxB;AACA,AHfJ,WAAA,EGeS,SHfT,KGeI,CAAoB,KAApB,GAA4B,EAA5B;AACA,AH1CJ,CAAA,EAAA,UG0CS,WAAL,CAAiB,KAAjB,GAAyB,EAAzB;AACA,AH3CS,QAAA,KG2CJ,MH3CI,GAAA,CG2CT,CAAgB,KAAhB,IH3CS;AG4CV,KALO;AAOA,0BAAA,SAAA,CAAA,kBAAA,GAAR,YAAA;AACE,eAAO,IAAI,cAAA,WAAJ,CACL,gBAAA,aAAA,CAAc,MAAd,CAAqB,KAAK,UAAL,CAAgB,KAArC,CADK,EAEL,SAAS,KAAK,cAAL,CAAoB,KAA7B,CAFK,EAGL,WAAW,KAAK,WAAL,CAAiB,KAA5B,CAHK,CAAP;AAKD,KANO;AAOV,WAAA,qBAAA;AA9CA,CAAA,EAAA;AAAa,QAAA,qBAAA,GAAA,qBAAA","file":"app.6f198a84.map","sourceRoot":"../src","sourcesContent":["export class Negotiations {\n  private _negotiations: any;\n\n  constructor() {\n    this._negotiations = [];\n  }\n\n  add(negotiation: any) {\n    this._negotiations.push(negotiation);\n  }\n\n  toArray() {\n    return [].concat(this._negotiations);\n  }\n\n  get totalVolume() {\n    return this._negotiations.reduce((total: any, negotiation: any) => total + negotiation.volume, 0);\n  }\n}","export class View {\n  private _element: any;\n\n  constructor(selector: string) {\n    this._element = document.querySelector(selector);\n  }\n\n  public update(model: any) {\n    this._element.innerHTML = this.render(model);\n  }\n\n  public render(model: any) {\n    throw new Error('You need to implement the render method!')\n  }\n}","export class DateConverter {\n  static toText(date: any): string {\n    return `${date.getDate()}/${date.getMonth() + 1}/${date.getFullYear()}`\n  }\n\n  static toDate(text: string): Date {\n    const regex = /^\\d{4}-\\d{2}-\\d{2}$/;\n    if (!regex.test(text)) {\n      throw new Error('Must be in the format yyyy-mm-dd')\n    }\n    return new Date(...text.split('-').map((item, index) => item - index % 2));\n  }\n}","import { View } from './View';\nimport { DateConverter } from '../converters/DateConverter';\n\nexport class NegotiationsView extends View {\n  render(model: any): string {\n    console.log(model);\n    return `\n      <table class=\"table\">\n          <thead>\n              <tr>\n                  <th>Date</th>\n                  <th>Quantity</th>\n                  <th>Value</th>\n                  <th>Volume</th>\n              </tr>\n          </thead>\n\n          <tbody>\n              ${model.toArray().map((negotiation: any) =>\n                `\n                  <tr>\n                      <td>${DateConverter.toText(negotiation.date)}</td>\n                      <td>${negotiation.quantity}</td>\n                      <td>${negotiation.value}</td>\n                      <td>${negotiation.volume}</td>\n                  </tr>                        \n              `).join('')}\n          </tbody>\n          \n          <tfoot>\n              <tr>\n                  <td colspan=\"3\"></td>\n                  <td>${model.totalVolume}</td>            \n              </tr>\n          </tfoot>\n          \n      </table>      \n    `\n  }\n}\n","export class Negotiation {\n  private _date: any;\n  private _quantity: any;\n  private _value: any;\n\n  constructor(_date: any, _quantity: any, _value: any) {\n    Object.assign(this, {_quantity, _value});\n    this._date = new Date(_date.getTime());\n    Object.freeze(this);\n  }\n\n  get volume() {\n    return this._quantity * this._value;\n  }\n\n  get date() {\n    return new Date(this._date.getTime());\n  }\n\n  get quantity() {\n    return this._quantity;\n  }\n\n  get value() {\n    return this._value;\n  }\n}","export class Message {\n  private _text: string;\n\n  constructor(text = '') {\n    this._text = text;\n  }\n\n  get text() {\n    return this._text;\n  }\n\n  set text(text) {\n    this._text = text;\n  }\n}","import { View } from './View';\n\nexport class MessageView extends View {\n  render(model: any): string {\n    return model.text ? `<p>${model.text}</p>` : '';\n  }\n}","import { Negotiations } from './../domain/negotiation/Negotiations';\nimport { NegotiationsView } from '../ui/views/NegotiationsView';\nimport { Negotiation } from './../domain/negotiation/Negotiation';\nimport { DateConverter } from './../ui/converters/DateConverter';\nimport { Message } from './../ui/models/Message';\nimport { MessageView } from '../ui/views/MessageView';\n\nexport class NegotiationController {\n  private _inputDate: any;\n  private _inputQuantity: any;\n  private _inputValue: any;\n  private _negotiations: any;\n  private _negotiationsView: any;\n  private _message: any;\n  private _messageView: any;\n\n  constructor() {\n    const $ = document.querySelector.bind(document);\n    this._inputDate = $('#date');\n    this._inputQuantity = $('#quantity');\n    this._inputValue = $('#value');\n\n    this._negotiations = new Negotiations();\n    this._negotiationsView = new NegotiationsView('#negotiations');\n\n    this._message = new Message();\n    this._messageView = new MessageView('#messageView');\n    this._messageView.update(this._message);\n  }\n\n  public add(event: any): void {\n    event.preventDefault();\n    this._negotiations.add(this._createNegotiation());\n    this._message.text = 'Successfully created negotiation'\n    this._negotiationsView.update(this._negotiations);\n    this._clearForm();\n    this._messageView.update(this._message);\n  }\n\n  private _clearForm(): void {\n    this._inputDate.value = '';\n    this._inputQuantity.value = '';\n    this._inputValue.value = '';\n    this._inputDate.focus();\n  }\n\n  private _createNegotiation() {\n    return new Negotiation(\n      DateConverter.toDate(this._inputDate.value),\n      parseInt(this._inputQuantity.value),\n      parseFloat(this._inputValue.value)\n    );\n  }\n}","import { NegotiationController } from './controllers/NegotiationController';\n\nconst controller = new NegotiationController;\nconst $form = document.querySelector('[data-js=\"form\"]')\n\nif ($form) {\n  $form.addEventListener('submit', controller.add.bind(controller))\n}"]}